import{r as t,c as i,h as s,g as h}from"./p-d56e5143.js";import{c as e,a as n,T as o,h as a}from"./p-0755b08e.js";import{c as r}from"./p-c51c30f3.js";import{T as c}from"./p-953a86c1.js";var l=e((function(t){t.exports=function(){function t(t){this.o=o({},this.defaults,t),this.initHtml(),this.initValues(),this.initEvents(),this.updateClassnames()}window.addEventListener("touchmove",(function(){})),t.prototype={defaults:{el:".ms-container",cssClass:"",vertical:!1,multiplier:1,bounceCoefficient:.3,bounceMax:100,loop:0,interactive:!0,reverse:!1,currentIndex:0},initHtml:function(){if(this.msContainer=i.str(this.o.el)?document.querySelector(this.o.el):this.o.el,this.o.range){for(var t='<div class="ms-container '+this.o.cssClass+'"><ul class="ms-track">',s=this.o.range[0];s<=this.o.range[1];s++)t+=i.fnc(this.o.rangeContent)?e(this.o.rangeContent(s)):e(s);t+="</ul></div>";var h=document.createElement("div");h.innerHTML=t,this.msContainer.appendChild(h.firstChild),this.msContainer=this.msContainer.lastChild}if(this.msContainer.classList.add("ms-container--"+(this.o.vertical?"vertical":"horizontal")),this.o.reverse&&this.msContainer.classList.add("ms-container--reverse"),this.msTrack=this.msContainer.children[0],this.msSlides=this.msTrack.children,this.step=this.o.vertical?this.msSlides[0].scrollHeight:this.msSlides[0].scrollWidth,this.sliderLength=this.msSlides.length,this.o.loop){var n,o,a;for(a=document.createDocumentFragment(),o=this.sliderLength-(n=this.o.loop);n--;)a.appendChild(this.msSlides[o++].cloneNode(!0));for(this.msTrack.insertBefore(a,this.msTrack.firstChild),a=document.createDocumentFragment(),o=n=this.o.loop;n--;)a.appendChild(this.msSlides[o++].cloneNode(!0));this.msTrack.appendChild(a),this.sliderLength+=2*this.o.loop}this.sliderWidth=this.sliderLength*this.step},initValues:function(){this.boundMin=this.o.reverse?0:-this.step*(this.sliderLength-1),this.boundMax=this.o.reverse?this.step*(this.sliderLength-1):0,this.targetPosition=this.targetPosition||0,this.ticking=!1,this.enabled=!0,this.pointerActive=!1,this.pointerMoved=!1,this.trackingPoints=[],this.msTrack.style[this.o.vertical?"height":"width"]=this.sliderWidth+"px",this.currentIndex=(this.currentIndex||this.o.currentIndex)+this.o.loop,this.updateSlider(void 0,!0),this.renderTarget();for(var t=this.sliderLength;t--;)this.setStyle(t,this.currentIndex==t?0:-1)},initEvents:function(){this.o.interactive&&(this.msContainer.addEventListener("touchstart",this.onDown.bind(this)),this.msContainer.addEventListener("mousedown",this.onDown.bind(this)),document.addEventListener("touchmove",this.onMove.bind(this),!!a()&&{passive:!1}),document.addEventListener("touchend",this.onUp.bind(this)),document.addEventListener("touchcancel",this.stopTracking.bind(this)),document.addEventListener("mousemove",this.onMove.bind(this),!!a()&&{passive:!1}),document.addEventListener("mouseup",this.onUp.bind(this)),this.o.prevEl&&(this.prevEl=i.str(this.o.prevEl)?document.querySelector(this.o.prevEl):this.o.prevEl,this.prevEl.addEventListener("click",this.prev.bind(this))),this.o.nextEl&&(this.nextEl=i.str(this.o.nextEl)?document.querySelector(this.o.nextEl):this.o.nextEl,this.nextEl.addEventListener("click",this.next.bind(this)))),window.addEventListener("resize",this.onResize.bind(this))},prev:function(){this.enabled&&this.updateSlider(Math.round(this.targetPosition/this.step)*this.step+(this.o.reverse?-this.step:this.step))},next:function(){this.enabled&&this.updateSlider(Math.round(this.targetPosition/this.step)*this.step+(this.o.reverse?this.step:-this.step))},select:function(t){this.enabled&&this.updateSlider((t+this.o.loop)*(this.o.reverse?this.step:-this.step))},setStyleToNode:function(t,i,s,h){if(i){var e="";for(var n in i)"."==n[0]?this.setStyleToNode(t.querySelector(n),i[n],s,h):"transform"==n?i[n].forEach((function(t){for(var i in t)e+=i+"("+c(t[i],s,h),"rotate"==i?e+="deg":"translateX"!=i&&"translateY"!=i&&"translateZ"!=i||(e+="px"),e+=") "})):e=c(i[n],s,h),t.style[n]=e}},setStyle:function(t,s,h){this.setStyleToNode(this.msSlides[t],this.o.style,s,h),i.fnc(this.o.customStyles)&&this.o.customStyles(t,s,h)},renderTarget:function(){if(this.o.sync)for(var t,s=this.o.sync.length;s--;)(t=this.o.sync[s]).targetPosition=(t.o.reverse?-1:1)*this.targetPosition/this.sliderWidth*t.sliderWidth,t.renderTarget();var e=this.o.loop*this.step,n=this.sliderWidth-2*e;if(this.o.loop)if(-this.targetPosition<e)for(;-this.targetPosition<e;)this.targetPosition-=n;else if(-this.targetPosition>=e+n)for(;-this.targetPosition>=e+n;)this.targetPosition+=n;var o=(this.o.reverse?1:-1)*this.targetPosition/this.step;this.onChangeCurrentIndex(Math.round(o));var a=Math.floor(o),r=Math.ceil(o),c=o-a,l=o-r;i.und(this.lowerIndex)||this.lowerIndex==a||this.lowerIndex==r||this.setStyle(this.lowerIndex,1,!0),i.und(this.higherIndex)||this.higherIndex==a||this.higherIndex==r||this.setStyle(this.higherIndex,-1),a>=0&&a<this.sliderLength&&(this.setStyle(a,c,!0),this.lowerIndex=a),r>=0&&r<this.sliderLength&&(this.setStyle(r,l),this.higherIndex=r),this.msTrack.style[h]="translate"+(this.o.vertical?"Y":"X")+"("+this.targetPosition+"px)"},onDown:function(t){if(this.enabled&&!this.pointerActive){var i=r(t);this.pointerActive=!0,this.pointerId=i.id,this.pointerLastX=this.pointerCurrentX=i.x,this.pointerLastY=this.pointerCurrentY=i.y,this.trackingPoints=[],this.addTrackingPoint(this.pointerLastX,this.pointerLastY),this.animateInstance&&this.animateInstance.stop()}},onMove:function(t){if(this.enabled&&this.pointerActive){var i=r(t);if(i.id===this.pointerId){this.pointerCurrentX=i.x,this.pointerCurrentY=i.y;var s=this.pointerMoved;if(!this.pointerMoved){var h=Math.abs(Math.abs(this.pointerCurrentX)-Math.abs(this.pointerLastX))<Math.abs(Math.abs(this.pointerCurrentY)-Math.abs(this.pointerLastY));(this.o.vertical&&h||!this.o.vertical&&!h)&&(s=!0)}s?(t.preventDefault(),this.pointerMoved=!0,this.addTrackingPoint(this.pointerLastX,this.pointerLastY),this.requestTick()):this.stopTracking(-1)}}},onUp:function(t){if(this.enabled&&this.pointerActive&&r(t).id===this.pointerId){var i=t.target;if(this.msTrack.contains(i))for(;!i.matches(".ms-slide, .ms-track");)i=i.parentNode;var s=Array.prototype.indexOf.call(this.msSlides,i);this.pointerMoved||-1!==s&&(this.currentIndex=s,this.updateSlider()),this.stopTracking(s)}},onResize:function(){},stopTracking:function(t){this.pointerActive=!1,(this.pointerMoved||-1===t)&&(this.pointerMoved=!1,this.addTrackingPoint(this.pointerLastX,this.pointerLastY),this.startDecelAnim())},addTrackingPoint:function(t,i){for(var s=Date.now();this.trackingPoints.length>0&&!(s-this.trackingPoints[0].time<=100);)this.trackingPoints.shift();this.trackingPoints.push({x:t,y:i,time:s})},updateAndRender:function(){var t,i=this.o.vertical?this.pointerCurrentY-this.pointerLastY:this.pointerCurrentX-this.pointerLastX;if(this.targetPosition+=i*this.o.multiplier,this.o.bounceCoefficient){var s=this.checkBounds();0!==s&&(this.targetPosition-=i*(t=s,5e-6*Math.pow(t,2)+1e-4*t+.55)*this.o.multiplier)}else this.checkBounds(!0);this.renderTarget(),this.pointerLastX=this.pointerCurrentX,this.pointerLastY=this.pointerCurrentY,this.ticking=!1},requestTick:function(){this.ticking||requestAnimationFrame(this.updateAndRender.bind(this)),this.ticking=!0},checkBounds:function(t){var i=0;return void 0!==this.boundMin&&this.targetPosition<this.boundMin?i=this.boundMin-this.targetPosition:void 0!==this.boundMax&&this.targetPosition>this.boundMax&&(i=this.boundMax-this.targetPosition),t&&0!==i&&(this.targetPosition=i>0?this.boundMin:this.boundMax),i},startDecelAnim:function(){var t=this.trackingPoints[0],i=this.trackingPoints[this.trackingPoints.length-1];this.decVel=(this.o.vertical?i.y-t.y:i.x-t.x)/((i.time-t.time)/15/this.o.multiplier)||0;var s=this.targetPosition+12*this.decVel,h=s%this.step;s-=h,Math.abs(h)>this.step/2&&(s+=(h>0?1:-1)*this.step),this.updateSlider(s)},fixCurrentIndex:function(){this.o.loop&&(this.currentIndex<this.o.loop?this.currentIndex=this.sliderLength-this.o.loop+(this.currentIndex-this.o.loop):this.currentIndex>this.sliderLength-this.o.loop-1&&(this.currentIndex=this.currentIndex+2*this.o.loop-this.sliderLength))},updateSlider:function(t,s){i.und(t)?t=(this.o.reverse?1:-1)*this.currentIndex*this.step:this.currentIndex=(this.o.reverse?1:-1)*t/this.step,this.fixCurrentIndex(),t!==this.targetPosition&&(this.updateClassnames(),this.animateTarget(t,s))},updateClassnames:function(){this.prevEl&&(0===this.currentIndex?this.prevEl.classList.add("ms-first"):this.prevEl.classList.remove("ms-first")),this.nextEl&&(this.currentIndex===this.sliderLength-1?this.nextEl.classList.add("ms-last"):this.nextEl.classList.remove("ms-last"))},animateTarget:function(t,s,h){this.animateInstance&&this.animateInstance.stop();var e=this,n=this.targetPosition,o=t;this.animateInstance=function(t,s,h){if(s){var e=performance.now(),n=null,o=!1,a=function(r){var c=(r-e)/s;c<0&&(c=0),c>1&&(c=1),i.fnc(h)&&(c=h(c)),t(c),1===c||o||(n=requestAnimationFrame(a))};return n=requestAnimationFrame(a),new function(){this.stop=function(){n&&cancelAnimationFrame(n),o=!0}}}t(1)}((function(t){e.targetPosition=o>n?n+(o-n)*t:n-(n-o)*t;var i=e.o.reverse?0:-(e.sliderLength-1)*e.step,s=e.o.reverse?(e.sliderLength-1)*e.step:0;!h&&!e.o.loop&&e.o.bounceCoefficient&&(e.targetPosition>s&&e.targetPosition>s+Math.min((o-s)*e.o.bounceCoefficient,e.o.bounceMax)||e.targetPosition<i&&e.targetPosition<i-Math.min(-(o-i)*e.o.bounceCoefficient,e.o.bounceMax))?(e.animateInstance.stop(),e.animateTarget(e.targetPosition<i?i:s,!1,!0),e.currentIndex=e.targetPosition<i?0:e.sliderLength-1):e.renderTarget()}),s?0:500,(function(t){return t*(2-t)}))},onChangeCurrentIndex:function(t){var s=this.o.loop?t-this.o.loop:t;s=s===this.sliderLength-2*this.o.loop?0:s,i.fnc(this.o.change)&&s!==this.lastCurrentIndex&&(this.o.change(s,this.lastCurrentIndex),this.lastCurrentIndex=s)},getCurrentIndex:function(){return this.o.loop?this.currentIndex-this.o.loop:this.currentIndex},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1}};var i={arr:function(t){return Array.isArray(t)},str:function(t){return"string"==typeof t},und:function(t){return void 0===t},fnc:function(t){return"function"==typeof t}},s="transform",h=function(t,i){if(i in t.style)return getComputedStyle(t).getPropertyValue(i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())||"0"}(document.body,s)?s:"-webkit-"+s;function e(t){return'<li class="ms-slide">'+t+"</li>"}function n(t,s){for(var h in s)t[h]=i.arr(s[h])?s[h].slice(0):s[h];return t}function o(t){t||(t={});for(var i=1;i<arguments.length;i++)n(t,arguments[i]);return t}function a(){var t=!1;try{var i=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,i)}catch(s){}return a=function(){return t},t}function r(t){if("touchmove"===t.type||"touchstart"===t.type||"touchend"===t.type){var i=t.targetTouches[0]||t.changedTouches[0];return{x:i.clientX,y:i.clientY,id:i.identifier}}return{x:t.clientX,y:t.clientY,id:null}}function c(t,i,s){var h=t[0],e=t[1],n=s?e-h:e-(t[2]||h);return s?e-n*i:e+n*i}return o(t,{extend:o,transformProperty:h,getCurrentValue:c})}()}));const u=class{constructor(s){t(this,s),this.newIndexSelected=i(this,"newIndexSelected",7),this.dateClicked=i(this,"dateClicked",7),this.externalUpdate=!1,this.newTimeStepIndex=0}componentDidLoad(){this.generateSlider(this.timeSteps,this.loadedTimeStepMap)}onTimeStepIndexChange(t){this.timeline&&(this.timeStepIndex=t,this.newTimeStepIndex!==t&&(this.newTimeStepIndex=t,this.externalUpdate=!0,this.timeline.select(t)))}onTimeStepsChange(t){const i=this.el.firstElementChild.querySelector(".ms-container");this.el.firstElementChild.removeChild(i),this.timeline=null,this.generateSlider(t,this.loadedTimeStepMap)}onLoadedTimeStepsChange(t){if(t.size>0){this.loadedTimeStepMap=t,void 0===this.slides&&(this.slides=this.el.firstElementChild.querySelectorAll(".timestep"));for(let i=0;i<this.slides.length;i++)void 0===t.get(i)?this.slides[i].classList.add("disabled"):this.slides[i].classList.remove("disabled")}else this.slides=void 0}newIndex(t){this.timeline&&(this.externalUpdate&&(this.externalUpdate=!1,this.dateClicked.emit(t.detail)),this.externalUpdate||(this.newTimeStepIndex=t.detail,this.dateClicked.emit(t.detail)))}generateSlider(t,i){const s=t.length,h=this.newIndexSelected,e=this.getNewIndex,n=this;this.timeline=new l({el:this.el.firstChild,range:[1,s],rangeContent:t=>n.disableTimesteps&&null!=n.loadedTimeStepMap?void 0!==i.get(t-1)?"<div class='timestep'></div>":"<div class='timestep disabled' \"></div>":"<div class='timestep'></div>",style:{transform:[{scale:[.4,1]}],opacity:[.3,1]},currentIndex:this.timeStepIndex>s-1?0:this.timeStepIndex,change(t,i){const o=e(t,s),a=this.el.firstElementChild.querySelectorAll(".timestep");void 0!==a[i]&&a[i].classList.remove("selected"),a[o].classList.add("selected"),null!=n.loadedTimeStepMap&&void 0!==n.loadedTimeStepMap.get(o)?h.emit(o):n.disableTimesteps||h.emit(o)}})}getNewIndex(t,i){let s;return s=t<0||-0===t?0:t>i-1?i-1:isNaN(t)?0:t,s}render(){return s("div",{class:"container"})}get el(){return h(this)}static get watchers(){return{timeStepIndex:["onTimeStepIndexChange"],timeSteps:["onTimeStepsChange"],loadedTimeStepMap:["onLoadedTimeStepsChange"]}}};u.style='.container{width:100%;height:100%;overflow:hidden}.ms-container{position:relative;top:50%;width:340px;max-width:100%;margin:0 auto;overflow:hidden;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.ms-track{position:relative;left:calc(50% - 25px);width:340px;white-space:nowrap;font-size:0;list-style:none;padding:0;margin:0;will-change:transform}.ms-slide{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:50px;height:100%;font-size:50px;font-family:"Roboto Mono", monospace;color:#FFFFFF;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;will-change:transform}.timestep{width:7px;height:30px;border-radius:30%;background-color:#FFFFFF}.timestep.selected{background-color:#b9dc0c}.timestep.selected.disabled{background-color:#53676D}.timestep.disabled{background-color:#53676D}';const d=class{constructor(s){t(this,s),this.forwardClicked=i(this,"forwardClicked",7),this.backClicked=i(this,"backClicked",7),this.playPauseClicked=i(this,"playPauseClicked",7),this.disablePlayButton=!1,this.playing=!1}onpPlayingChange(t){this.playing=t}render(){return s("div",{class:"buttonsContainer",role:"controlbuttons"},s("button",{class:"buttonsContainer__button back",title:"Back","aria-label":"Back",onClick:()=>{this.handleBackClick()}},s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},s("path",{d:"M249.6 402V110L32 256l217.6 146zm12.8-146L480 402V110L262.4 256z",fill:"#B9DC0C"}))),this.disablePlayButton?s("button",{class:"buttonsContainer__button play",title:"Play Button Disabled","aria-label":"Play Button Disabled"},s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},s("path",{d:"M96 52v408l320-204L96 52z",fill:"#A1A0AA",opacity:"0.75"}))):s("button",{class:"buttonsContainer__button play",title:this.playing?"Pause":"Play","aria-label":"PlayPause",onClick:()=>{this.handlePlayPauseClick()}},s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},s("path",this.playing?{d:"M96 448h106.7V64H96v384zM309.3 64v384H416V64H309.3z",fill:"#B9DC0C"}:{d:"M96 52v408l320-204L96 52z",fill:"#B9DC0C"}))),s("button",{class:"buttonsContainer__button forward",title:"Forward","aria-label":"Forward",onClick:()=>{this.handleForwardClick()}},s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},s("path",{d:"M480 256L262.4 110v292L480 256zM32 110v292l217.6-146L32 110z",fill:"#B9DC0C"}))))}handleBackClick(){this.backClicked.emit()}handlePlayPauseClick(){this.playPauseClicked.emit()}handleForwardClick(){this.forwardClicked.emit()}static get watchers(){return{playing:["onpPlayingChange"]}}};d.style=".buttonsContainer .buttonsContainer__button{background-color:transparent;height:46.5px;width:46.5px;border:none;text-align:-webkit-center;cursor:pointer}.buttonsContainer .buttonsContainer__button svg{display:block;height:60%}";const m=class{constructor(i){t(this,i),this.timeStepProperties=[],this.warnings=[],this.timeLineConstraint={left:0,right:Number.MAX_SAFE_INTEGER}}constrainTimelineHandler(){this.timeLineConstraint=this.timeStepUtils.resetTimelineConstraint(this.timeSteps.length)}onTimeStepsChange(t){this.timeStepProperties=[],this.timeStepSpacingService.setTimesteps(t),this.timeLineConstraint=this.timeStepUtils.resetTimelineConstraint(this.timeSteps.length)}watchMouseState(t){this.mouseState=t}constraintChangedHandler(t){null!==t.detail&&(this.timeLineConstraint=t.detail)}componentWillLoad(){this.timeStepSpacingService=new c(this.timeSteps),this.timeStepUtils=new o}render(){return this.timeSteps?s("div",{class:"timesteps"},s("time-slider",{timeSteps:this.timeSteps,timeStepProperties:this.timeStepProperties,loadedTimeStepMap:this.loadedTimeStepMap,timeStepIndex:this.timeStepIndex,disableTimesteps:this.disableTimesteps,mouseState:this.mouseState,constrainTimeline:this.constrainTimeline}),this.warnings&&this.warnings.length>0&&s("timeline-warnings",{firstTimeStep:this.timeSteps[0],lastTimeStep:this.timeSteps[this.timeSteps.length-1],warnings:this.warnings}),this.timeSteps.map((t,i)=>s("time-step",{timeData:this.generateTimeStepProp(t,i,this.constrainTimeline),labelFormat:this.labelFormat}))):null}generateTimeStepProp(t,i,s){let h=this.timeStepProperties[i];if(null==h){const s=a(t),e=i>0?a(this.timeSteps[i-1]):void 0;h={nextTimeStep:i<this.timeSteps.length-1?a(this.timeSteps[i+1]):void 0,timeStep:s,previousTimeStep:e,style:this.timeStepSpacingService.generatePaddingWidths(i),enabled:!this.disableTimesteps}}const e=h.enabled,n=this.disableTimesteps?this.loadedTimeStepMap:null;return h.enabled=(!this.disableTimesteps||null!==n)&&this.timeStepUtils.isValidTimeStep(i,n,this.timeLineConstraint),s||this.disableTimesteps||(h.enabled=!0),e!==h.enabled&&(h=r(h)),this.timeStepProperties[i]=h,h}static get watchers(){return{constrainTimeline:["constrainTimelineHandler"],timeSteps:["onTimeStepsChange"],mouseState:["watchMouseState"]}}};m.style=".timesteps{white-space:initial;position:relative}";export{u as mobile_timeline,d as play_buttons,m as time_line}