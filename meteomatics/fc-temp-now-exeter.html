<!DOCTYPE html>
<html>

<head>
    <title>Exeter - Forecast Temperature Now - from Meteomatics API</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link rel="shortcut icon" type="image/x-icon" href="/resources/images/favicon.png" />

    <style>
        html {
            font-family: Arial, Helvetica, sans-serif;
        }
    </style>
</head>

<body>

    <script>

        // Get data from API via proxy
        var xhr = new XMLHttpRequest(),
            meteomaticsProxy = "https://betatest.metoffice.gov.uk/enthusiast/api/proxy";

        xhr.open("GET", meteomaticsProxy + "/now/t_2m:C/50.7268877,-3.4755385/json?model=ukmo-euro4", true);
        xhr.onload = function() {
            var data = JSON.parse(xhr.responseText);
            handleData(data);
        };
        xhr.send("");

        // On success, do something useful with the data
        function handleData (values) {

            var h1 = document.createElement("H1"),
                h2 = document.createElement("H2"),
                h3 = document.createElement("H4"),
                t1 = document.createTextNode("Forecast temperature for now at Met Office HQ is: " + values.data[0].coordinates[0].dates[0].value + "Â°C"),
                t2 = document.createTextNode("Model data from: UKMO-EURO4 and valid for: " + values.dateGenerated),
                t3 = document.createTextNode("Data from: https://www.meteomatics.com/en/weather-api/");

            h1.appendChild(t1);
            document.body.appendChild(h1);

            h2.appendChild(t2);
            document.body.appendChild(h2);

            h3.appendChild(t3);
            document.body.appendChild(h3);

        }

    </script>

</body>

</html>