<!DOCTYPE html>
<html lang="en">

  <head>

        <title>Time scrubber 3</title>

        <meta charset="utf-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, , minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />

        <!-- Stylesheets -->
        <link rel="stylesheet" href="https://rsms.me/inter/inter.css">

        <!-- Flickity Stylesheets -->
        <link rel="stylesheet" href="resources/js/flickity/flickity.min.css" media="screen">

        <!-- Flickity Javascript -->
        <script src="resources/js/flickity/flickity.pkgd.min.js"></script>

        <style>

            * {
                margin: 0;
            }

            body {
                font-family: Inter, Arial, Helvetica, sans-serif;
                background: #fff;
                overflow-x: hidden;
            }

            .wrapper {
                display: flex;
                flex-direction: column;
                min-height: 90vh;
                min-width: 100vw;

            }

            .pageMain {
                flex-grow: 1;
                background: #fff;
            }

            .pageFooter {
                height: 120px;
                background: #fff;
            }

            .marker {
                display: flex;
                justify-content: center;
            }

            .basemap {
                display: flex;
                justify-content: center;
                background: url("resources/images/375x357_basemap.jpg");
                background-position: top center;
                background-repeat: no-repeat;
            }

            .overlayImage {
                width: 375px;
                height: 357px;
            }

            .currentFrame {
                display: flex;
                justify-content: center;
            }

            .mainCarousel {
                height: 50px;
            }

            .carouselCell {
                height: 100%;
            }

        </style>

    </head>

    <body>

        <div class="wrapper">

            <main class="pageMain">

                <div class="basemap">

                    <img class="overlayImage" src="resources/images/375x357_radar.png">

                </div>

            </main>

            <footer class="pageFooter">

                <div id="currentFrame" class="currentFrame">Selected time step: 0</div>

                <div class="marker">â–¼</div>

                <div id="mainCarousel" class="mainCarousel">
                    <div class="carouselCell"><img src="resources/images/noun_measure_95971.png"></div>
                    <div class="carouselCell"><img src="resources/images/noun_measure_95971.png"></div>
                    <div class="carouselCell"><img src="resources/images/noun_measure_95971.png"></div>
                    <div class="carouselCell"><img src="resources/images/noun_measure_95971.png"></div>
                    <div class="carouselCell"><img src="resources/images/noun_measure_95971.png"></div>
                    <div class="carouselCell"><img src="resources/images/noun_measure_95971.png"></div>
                    <div class="carouselCell"><img src="resources/images/noun_measure_95971.png"></div>
                    <div class="carouselCell"><img src="resources/images/noun_measure_95971.png"></div>
                    <div class="carouselCell"><img src="resources/images/noun_measure_95971.png"></div>
                    <div class="carouselCell"><img src="resources/images/noun_measure_95971.png"></div>
                    <div class="carouselCell"><img src="resources/images/noun_measure_95971.png"></div>
                    <div class="carouselCell"><img src="resources/images/noun_measure_95971.png"></div>
                    <div class="carouselCell"><img src="resources/images/noun_measure_95971.png"></div>
                    <div class="carouselCell"><img src="resources/images/noun_measure_95971.png"></div>
                    <div class="carouselCell"><img src="resources/images/noun_measure_95971.png"></div>
                    <div class="carouselCell"><img src="resources/images/noun_measure_95971.png"></div>
                    <div class="carouselCell"><img src="resources/images/noun_measure_95971.png"></div>
                    <div class="carouselCell"><img src="resources/images/noun_measure_95971.png"></div>
                    <div class="carouselCell"><img src="resources/images/noun_measure_95971.png"></div>
                    <div class="carouselCell"><img src="resources/images/noun_measure_95971.png"></div>
                    <div class="carouselCell"><img src="resources/images/noun_measure_95971.png"></div>
                    <div class="carouselCell"><img src="resources/images/noun_measure_95971.png"></div>
                    <div class="carouselCell"><img src="resources/images/noun_measure_95971.png"></div>
                    <div class="carouselCell"><img src="resources/images/noun_measure_95971.png"></div>
                    <div class="carouselCell"><img src="resources/images/noun_measure_95971.png"></div>
                </div>

            </footer>

        </div>

        <script>

            document.addEventListener('DOMContentLoaded', function(event) {

                var toggleLiveUpdate = false,
                    timeScrubberContainer,
                    timeScrubberControl,
                    currentFrameControl,
                    currentFrame;

                // Handle on the carousel
                timeScrubberContainer = document.getElementById('mainCarousel');

                // Create the Time Scrubber
                timeScrubberControl = new Flickity(timeScrubberContainer, {
                    setGallerySize: false,
                    cellAlign: 'center',
                    initialIndex: 0,
                    selectedAttraction: 0.1,
                    friction: 0.2,
                    prevNextButtons: false,
                    pageDots: false,
                    autoPlay: false,
                    on: {
                        ready: function(event) {
                            this.resize();
                        }
                    }
                });

                // Handle on the time step counter
                currentFrameControl = document.getElementById('currentFrame');

                if (toggleLiveUpdate) {

                    // If live updates required

                    // On Time Scrubber scroll event handler
                    timeScrubberControl.on('scroll', function(event) {

                        var count = timeScrubberControl.cells.length - 1,
                            target = Math.round((count / 100) * (event * 100));

                        if (target < 0 || target === -0) {
                            target = 0;
                        }

                        if (target > count) {
                            target = count;
                        }

                        if (target !== currentFrame) {

                            currentFrame = target
                            currentFrameControl.innerHTML = "Selected time step: " + currentFrame;

                        }

                    });

                } else {

                    // Change events only

                    // On Time Scrubber change event handler
                    timeScrubberControl.on('change', function(event) {

                        currentFrame = event;
                        currentFrameControl.innerHTML = "Selected time step: " + currentFrame;

                    });

                }

            })

        </script>

    </body>

</html>