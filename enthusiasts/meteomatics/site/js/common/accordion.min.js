"use strict";window.metoffice=window.metoffice||{},window.metoffice.accordion={init:function(e){var t=e.hasAttribute("data-allow-multiple"),i=t||e.hasAttribute("data-allow-toggle"),n=Array.prototype.slice.call(e.querySelectorAll(".accordion"));if(e.addEventListener("click",function(n){var a=n.target;if(a.classList.contains("accordion")){var o="true"===a.getAttribute("aria-expanded"),r=e.querySelector("[aria-expanded='true']");!t&&r&&r!==a&&(r.setAttribute("aria-expanded","false"),document.getElementById(r.getAttribute("aria-controls")).setAttribute("hidden",""),i||r.removeAttribute("aria-disabled")),o?i&&o&&(a.setAttribute("aria-expanded","false"),document.getElementById(a.getAttribute("aria-controls")).setAttribute("hidden",""),a.getElementsByClassName("icon--chevron")[0].classList.remove("icon--flip-horizontal"),window.metoffice.eventBus.notifyEventSubscribers(window.metoffice.enthusiast.eventDefinitions.ACCORDION_CLOSED,a.getAttribute("id"))):(a.setAttribute("aria-expanded","true"),document.getElementById(a.getAttribute("aria-controls")).removeAttribute("hidden"),i||a.setAttribute("aria-disabled","true"),a.getElementsByClassName("icon--chevron")[0].classList.add("icon--flip-horizontal"),window.metoffice.eventBus.notifyEventSubscribers(window.metoffice.enthusiast.eventDefinitions.ACCORDION_OPENED,a.getAttribute("id"))),n.preventDefault()}}),e.addEventListener("keydown",function(e){var t=e.target,i=e.which.toString(),a=new RegExp(window.metoffice.keys.PAGE_UP+"|"+window.metoffice.keys.PAGE_DOWN),o=new RegExp(window.metoffice.keys.UP+"|"+window.metoffice.keys.DOWN),r=new RegExp(window.metoffice.keys.HOME+"|"+window.metoffice.keys.END),s=e.ctrlKey&&i.match(a);if(t.classList.contains("accordion"))if(i.match(o)||s){var c=n.indexOf(t),d=i.match(/34|40/)?1:-1,f=n.length;n[(c+f+d)%f].focus(),e.preventDefault()}else if(i.match(r)){switch(i){case window.metoffice.keys.HOME.toString():n[0].focus();break;case window.metoffice.keys.END.toString():n[n.length-1].focus()}e.preventDefault()}}),!i){var a=e.querySelector("[aria-expanded='true']");a&&a.setAttribute("aria-disabled","true")}}};