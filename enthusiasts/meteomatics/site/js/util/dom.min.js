window.metoffice=window.metoffice||{},window.metoffice.domUtil={on:function(t,e,r,s){var n=document.querySelector(t);n.addEventListener(e,function(t){for(var e=n.querySelectorAll(r),i=t.target,a=0,u=e.length;a<u;a++)for(var o=i,f=e[a];o&&o!==n;){if(o===f)return s.call(f,t);o=o.parentNode}})},getParentsUntil:function(t,e,r){var s=[];if(e)var n=e.charAt(0);if(r)var i=r.charAt(0);for(;t&&t!==document;t=t.parentNode){if(e){if("."===n&&t.classList.contains(e.substr(1)))break;if("#"===n&&t.id===e.substr(1))break;if("["===n&&t.hasAttribute(e.substr(1,e.length-1)))break;if(t.tagName.toLowerCase()===e)break}r?("."===i&&t.classList.contains(r.substr(1))&&s.push(t),"#"===i&&t.id===r.substr(1)&&s.push(t),"["===i&&t.hasAttribute(r.substr(1,r.length-1))&&s.push(t),t.tagName.toLowerCase()===r&&s.push(t)):s.push(t)}return 0===s.length?null:s},getClosest:function(t,e){var r,s,n=e.charAt(0),i="classList"in document.documentElement;for("["===n&&(r=(e=e.substr(1,e.length-2)).split("=")).length>1&&(s=!0,r[1]=r[1].replace(/"/g,"").replace(/'/g,""));t&&t!==document&&1===t.nodeType;t=t.parentNode){if("."===n)if(i){if(t.classList.contains(e.substr(1)))return t}else if(new RegExp("(^|\\s)"+e.substr(1)+"(\\s|$)").test(t.className))return t;if("#"===n&&t.id===e.substr(1))return t;if("["===n&&t.hasAttribute(r[0])){if(!s)return t;if(t.getAttribute(r[0])===r[1])return t}if(t.tagName.toLowerCase()===e)return t}return null}};