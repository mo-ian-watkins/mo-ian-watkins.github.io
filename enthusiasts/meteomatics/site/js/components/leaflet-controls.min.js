"use strict";window.metoffice=window.metoffice||{},window.metoffice.enthusiast=window.metoffice.enthusiast||{},window.metoffice.enthusiast.leafletControls=function(){var t,e,i,n,o,r,c,s,f,d,a=function(){s=w(t,s),c=l(t,c),d=m(t,d),f=v(t,f),r=u(t,r)},u=function(t,i){if(b(i),e.map.attributionText)return i=L.control.attribution({prefix:e.map.attributionText,position:"bottomleft"}).addTo(t)},l=function(t,e){if(b(e),!L.Browser.mobile)return(e=L.control({position:"topright"})).onAdd=function(){var t=L.DomUtil.create("div","share-control");return L.DomEvent.disableClickPropagation(t),t.setAttribute("id","share-control"),t},e.addTo(t),window.metoffice.eventBus.notifyEventSubscribers(window.metoffice.enthusiast.eventDefinitions.SHARE_DETAILS_READY,{control:e}),e},w=function(t,e){return b(e),(e=L.control({position:"topright"})).onAdd=function(){var t=L.DomUtil.create("div","explainer-control");return L.DomEvent.disableClickPropagation(t),t.setAttribute("id","explainer-control"),t},e.addTo(t),window.metoffice.eventBus.notifyEventSubscribers(window.metoffice.enthusiast.eventDefinitions.EXPLAINER_DETAILS_READY,{control:e}),e},v=function(t,e){if(b(e),!L.Browser.mobile)return e=L.control.zoom({position:"bottomright"}).addTo(t)},m=function(t,r){var c,s,f,d;if(b(r),void 0!==i.key)return(r=L.control({position:"bottomright"})).onAdd=function(){return c=L.DomUtil.create("div","key-control"),L.DomEvent.disableClickPropagation(c),c.setAttribute("id","key-control"),(s=L.DomUtil.create("div","key-container hidden")).setAttribute("id","key-container"),(d=L.DomUtil.create("div","key-label-container")).setAttribute("id","key-label-container"),(f=L.DomUtil.create("div","")).setAttribute("id","key-svg-container"),d3.select(f).append("svg").attr("id","key").attr("class","key"),s.appendChild(d),s.appendChild(f),c.appendChild(s),c},r.addTo(t),window.metoffice.eventBus.notifyEventSubscribers(window.metoffice.enthusiast.eventDefinitions.KEY_DETAILS_READY,{control:r,configuration:e,currentLayer:i,currentModel:n,currentAltitude:o}),r},b=function(t){void 0!==t&&t.remove()};return{init:function(){window.metoffice.eventBus.subscribeToEvent(window.metoffice.enthusiast.eventDefinitions.CONFIGURATION_LOADED,function(t){e=t}),window.metoffice.eventBus.subscribeToEvent(window.metoffice.enthusiast.eventDefinitions.MAP_READY,function(e){t=e}),window.metoffice.eventBus.subscribeToEvent(window.metoffice.enthusiast.eventDefinitions.LAYER_CHANGED,function(t){i=t.layerConfig,n=t.modelConfig,void 0===i.parameter.vertical&&a()}),window.metoffice.eventBus.subscribeToEvent(window.metoffice.enthusiast.eventDefinitions.ALTITUDE_CHANGED,function(t){o=t,a()})}}}(),window.addEventListener("DOMContentLoaded",window.metoffice.enthusiast.leafletControls.init);