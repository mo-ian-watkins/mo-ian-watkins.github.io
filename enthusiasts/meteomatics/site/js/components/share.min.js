"use strict";window.metoffice=window.metoffice||{},window.metoffice.enthusiast=window.metoffice.enthusiast||{},window.metoffice.enthusiast.share=function(){var e,t,n,i=function(){var e=window.metoffice.uiFactory.createStandardButtonElement("share-button","","button--black",!1),t=document.createElement("span");return t.setAttribute("class","icon icon--share"),e.appendChild(t),e.addEventListener("click",s),e},o=function(){var e=document.createElement("div"),t=document.createElement("div"),i=document.createElement("h2"),o=document.createElement("div"),s=document.createElement("button"),d=window.metoffice.uiFactory.createStandardButtonElement("share-copy-link-button","Copy link","button--teal",!1),c=document.createElement("span");return(n=document.createElement("input")).setAttribute("class","popup__input"),n.setAttribute("id","share-input"),n.setAttribute("readonly","true"),i.textContent="Share this map",i.setAttribute("class","popup__heading"),c.setAttribute("class","icon icon--close"),s.setAttribute("class","button"),s.appendChild(c),s.addEventListener("click",a),t.setAttribute("class","popup__header"),t.appendChild(i),t.appendChild(s),d.dataset.clipboardTarget="#share-input",new ClipboardJS(d),o.setAttribute("class","popup__main"),o.appendChild(n),o.appendChild(d),e.setAttribute("class","popup popup--share hidden"),e.appendChild(t),e.appendChild(o),e},s=function(){t.classList.remove("hidden"),d(),window.metoffice.eventBus.notifyEventSubscribers(window.metoffice.enthusiast.eventDefinitions.SHARE_BUTTON_CLICKED)},a=function(){void 0!==t&&t.classList.add("hidden")},d=function(){n.setAttribute("value",window.location.href)};return{init:function(){window.metoffice.eventBus.subscribeToEvent(window.metoffice.enthusiast.eventDefinitions.SHARE_DETAILS_READY,function(n){var s=i();t=o(),(e=n.control).getContainer().appendChild(s),e.getContainer().appendChild(t),window.metoffice.eventBus.subscribeToEvent(window.metoffice.enthusiast.eventDefinitions.MODEL_CHANGED,d),window.metoffice.eventBus.subscribeToEvent(window.metoffice.enthusiast.eventDefinitions.ALTITUDE_CHANGED,d),window.metoffice.eventBus.subscribeToEvent(window.metoffice.enthusiast.eventDefinitions.TIMELINE_CHANGED,d)}),window.metoffice.eventBus.subscribeToEvent(window.metoffice.enthusiast.eventDefinitions.MAP_CLICKED,a),window.metoffice.eventBus.subscribeToEvent(window.metoffice.enthusiast.eventDefinitions.EXPLAINER_BUTTON_CLICKED,a)}}}(),window.addEventListener("DOMContentLoaded",window.metoffice.enthusiast.share.init);