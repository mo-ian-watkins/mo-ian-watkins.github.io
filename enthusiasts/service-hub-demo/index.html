<!DOCTYPE html>
<html lang="en">

<head>
    <title>ServiceHub Demo</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <!-- Leaflet -->
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.4.0/leaflet.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.4.0/leaflet.js"></script>
    <script src="leaflet-wms.js"></script>
    <script src="leaflet-wms-header.js"></script>

    <style>
        html,
        body,
        #map {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: #fff;
        }
    </style>

</head>

<body>

    <div id="map"></div>

    <script>

        // WMS Service: https://metoffice.sharepoint.com/sites/technologyservicehubservice/SitePages/Map%20Layers%20Template.aspx#4-0

        // Base map layer
        var baseLayer = new L.tileLayer('http://ec2-3-8-19-236.eu-west-2.compute.amazonaws.com/styles/dev-atlas-light-theme-base/{z}/{x}/{y}{r}.png');

        // Single Layer
        var wmsLayer = L.WMS.overlay('https://mdda.hub.metoffice.cloud/wms/glm/long', {
            //'service': 'WMS',
            //'version': '1.3.0',
            //'request': 'GetMap',
            //'layers': 'wind_speed_and_direction_on_pressure_levels',
            'layers': 'mean_sea_level_pressure',
            //'styles': 'streamlines',
            'styles': 'isobars_2hpa',
            'format': 'image/png',
            'transparent': 'TRUE',
            //'dim_run': '2019-07-26T06:00:00Z',
            //'dim_forecast': 'PT0S',
            //'elevation': '1000',
            'uppercase': true,
            opacity: 0.75
        });

        // Tiled Layer
        var wmsLayer2 = L.TileLayer.wmsHeader('https://mdda.hub.metoffice.cloud/wms/glm/long', {
            'service': 'WMS',
            'version': '1.3.0',
            'request': 'GetMap',
            //'layers': 'wind_speed_and_direction_on_pressure_levels',
            'layers': 'mean_sea_level_pressure',
            //'styles': 'arrows',
            'styles': 'isobars_2hpa',
            'format': 'image/png',
            'transparent': 'TRUE',
            //'dim_run': '2020-06-12T00:00:00Z',
            //'dim_forecast': 'PT0S',
            'elevation': '1000',
            'buffer': '256',
            'uppercase': true
        },
        [
            { header: 'x-api-key', value: '29095ff2ff043405adb7913eba4844e536a54136f7dd70fa50cc613c94dfe93c' }
        ]);

        var mapCenter = new L.LatLng(0, 0);

        var _map = new L.Map("map", {
            center: mapCenter,
            zoom: 3,
            maxZoom: 10,
            crs: L.CRS.EPSG3857,
            layers: [baseLayer, /* wmsLayer, */ wmsLayer2]
        });


    </script>

</body>

</html>
